{"ast":null,"code":"import { CollectiveItemResponse } from '@shared/models/collective-item-response';\nimport { ContentRequest } from '@shared/models/content-request';\nimport { ContentResponse } from '@shared/models/content-response';\nimport { EmployeeRequest } from '@shared/models/employee-request';\nimport { EmployeeToJobTitleRequest } from '@shared/models/employee-to-job-title-item-request';\nimport { EmployeeToJobTitleResponse } from '@shared/models/employee-to-job-title-item-response';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@base/services/web-api/employee/employee.service\";\nimport * as i2 from \"@base/services/web-api/content/content.service\";\nimport * as i3 from \"@base/services/web-api/job-title/job-title.service\";\nimport * as i4 from \"@base/services/web-api/employee-to-job-title/employee-to-job-title.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction EmployeeAdminComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_div_6_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.removeContent(item_r2);\n    });\n    i0.ɵɵtext(2, \" \\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0441\\u0442\\u0440\\u043E\\u043A\\u0443 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"textarea\", 15);\n    i0.ɵɵlistener(\"change\", function EmployeeAdminComponent_div_6_Template_textarea_change_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onNameChangeEvent($event, item_r2);\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r2.value);\n  }\n}\n\nfunction EmployeeAdminComponent_div_43_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    const employeeToJobTitle_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"selected\", item_r8.id === employeeToJobTitle_r6.jobTitleId)(\"value\", item_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r8.name, \" \");\n  }\n}\n\nfunction EmployeeAdminComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelementStart(1, \"select\", 17);\n    i0.ɵɵlistener(\"change\", function EmployeeAdminComponent_div_43_Template_select_change_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const employeeToJobTitle_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onJobTitleChangeEvent($event, employeeToJobTitle_r6);\n    });\n    i0.ɵɵtemplate(2, EmployeeAdminComponent_div_43_option_2_Template, 2, 3, \"option\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_div_43_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const employeeToJobTitle_r6 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.removeJobTitle(employeeToJobTitle_r6);\n    });\n    i0.ɵɵtext(4, \" \\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u043F\\u043E\\u0441\\u0430\\u0434\\u0443 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.jobTitles);\n  }\n}\n\nexport let EmployeeAdminComponent = /*#__PURE__*/(() => {\n  class EmployeeAdminComponent {\n    constructor(employeeService, contentService, jobTitleService, employeeToJobTitleService, route, router) {\n      this.employeeService = employeeService;\n      this.contentService = contentService;\n      this.jobTitleService = jobTitleService;\n      this.employeeToJobTitleService = employeeToJobTitleService;\n      this.route = route;\n      this.router = router;\n      this.employee = new CollectiveItemResponse();\n      this.contents = [];\n      this.jobTitles = [];\n      this.employeeToJobTitles = [];\n    }\n\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        let id = +params['id'];\n        this.employeeService.getEmployeeAsync(id).subscribe(result => {\n          this.employee = result;\n        });\n        this.contentService.getContentAsync(id).subscribe(result => {\n          this.contents = result;\n        });\n        this.jobTitleService.getJobTitleAsync().subscribe(result => {\n          this.jobTitles = result;\n        });\n        this.employeeToJobTitleService.getEmployeeToJobTitleByEmployeeIdAsync(id).subscribe(result => {\n          this.employeeToJobTitles = result;\n        });\n      });\n    }\n\n    toCollective() {\n      this.router.navigate(['admin', 'collective']);\n    }\n\n    removeContent(content) {\n      this.contents.forEach((element, index) => {\n        if (element == content) this.contents.splice(index, 1);\n      });\n      this.contentService.deleteContentAsync(content.id).subscribe();\n    }\n\n    addContent() {\n      var content = new ContentResponse();\n      content.value = 'Новий контент';\n      content.employeeId = this.employee.id;\n      this.contents.push(content);\n      var request = new ContentRequest();\n      request.value = content.value;\n      request.employeeId = content.employeeId;\n      this.contentService.createContentAsync(request).subscribe(result => content.id = result);\n    }\n\n    onNameChangeEvent(event, content) {\n      content.value = event.target.value;\n      var request = new ContentRequest();\n      request.id = content.id;\n      request.value = content.value;\n      request.employeeId = content.employeeId;\n      this.contentService.updateContentAsync(request).subscribe(result => content = result);\n    }\n\n    onChangeEvent() {\n      let request = new EmployeeRequest();\n      request.id = this.employee.id;\n      request.firstName = this.employee.firstName;\n      request.secondName = this.employee.secondName;\n      request.lastName = this.employee.lastName;\n      request.fullProfileUrl = this.employee.fullProfileUrl;\n      request.smallProfileUrl = this.employee.smallProfileUrl;\n      this.employeeService.updateEmployeeAsync(request).subscribe();\n    }\n\n    remove() {\n      this.employeeService.deleteEmployeeAsync(this.employee.id).subscribe(() => this.router.navigate(['admin', 'collective']));\n    }\n\n    add() {\n      var request = new EmployeeRequest();\n      request.firstName = \"Ім'я\";\n      request.secondName = 'По батькові';\n      request.lastName = 'Прізвище';\n      request.fullProfileUrl = 'https://lh3.googleusercontent.com/pw/AM-JKLWutzdGr_7fE74EF1mDd2etQ_cQKtRYM-flMkFG8VC503LMtG8QeaZ3WsZ9Y2ioBII3ANoctrSk3hlimUPgNzf5kXXyl9UcrU6fgQ0Vjlf1NbYJoyUUWmV8PnHV34kursBAuuxe2G4wne0_IVOlXkW-=w437-h462-no?authuser=0';\n      request.smallProfileUrl = 'https://lh3.googleusercontent.com/pw/AM-JKLWutzdGr_7fE74EF1mDd2etQ_cQKtRYM-flMkFG8VC503LMtG8QeaZ3WsZ9Y2ioBII3ANoctrSk3hlimUPgNzf5kXXyl9UcrU6fgQ0Vjlf1NbYJoyUUWmV8PnHV34kursBAuuxe2G4wne0_IVOlXkW-=w437-h462-no?authuser=0';\n      this.employeeService.createEmployeeAsync(request).subscribe(result => this.router.navigate(['admin', 'employee', result]));\n    }\n\n    goToJobTitles() {\n      this.router.navigate(['admin', 'job-title']);\n    }\n\n    removeJobTitle(employeeToJobTitle) {\n      this.employeeToJobTitles.forEach((element, index) => {\n        if (element == employeeToJobTitle) this.employeeToJobTitles.splice(index, 1);\n      });\n      this.employeeToJobTitleService.deleteEmployeeToJobTitleAsync(employeeToJobTitle.id).subscribe();\n    }\n\n    addJobTitle() {\n      var employeeToJobTitle = new EmployeeToJobTitleResponse();\n      employeeToJobTitle.employeeId = this.employee.id;\n      employeeToJobTitle.jobTitleId = this.jobTitles[0].id;\n      this.employeeToJobTitles.push(employeeToJobTitle);\n      var request = new EmployeeToJobTitleRequest();\n      request.employeeId = employeeToJobTitle.employeeId;\n      request.jobTitleId = employeeToJobTitle.jobTitleId;\n      this.employeeToJobTitleService.createEmployeeToJobTitleAsync(request).subscribe(result => employeeToJobTitle.id = result);\n    }\n\n    onJobTitleChangeEvent(event, employeeToJobTitle) {\n      console.log(event);\n      employeeToJobTitle.jobTitleId = event.target.value;\n      var request = new EmployeeToJobTitleRequest();\n      request.id = employeeToJobTitle.id;\n      request.jobTitleId = employeeToJobTitle.jobTitleId;\n      request.employeeId = employeeToJobTitle.employeeId;\n      this.employeeToJobTitleService.updateEmployeeToJobTitleAsync(request).subscribe(result => employeeToJobTitle = result);\n    }\n\n  }\n\n  EmployeeAdminComponent.ɵfac = function EmployeeAdminComponent_Factory(t) {\n    return new (t || EmployeeAdminComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService), i0.ɵɵdirectiveInject(i2.ContentService), i0.ɵɵdirectiveInject(i3.JobTitleService), i0.ɵɵdirectiveInject(i4.EmployeeToJobTitleService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  EmployeeAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmployeeAdminComponent,\n    selectors: [[\"app-employee-admin\"]],\n    decls: 46,\n    vars: 9,\n    consts: [[1, \"content\"], [1, \"btn-collective\", 3, \"click\"], [1, \"row\"], [1, \"col-6\"], [\"class\", \"content-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn-save\", 3, \"click\"], [1, \"buttons\"], [1, \"btn-remove\", 3, \"click\"], [1, \"col-4\"], [1, \"img-card\", 3, \"src\"], [1, \"text-content\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"col-8\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"job-title-label\", 3, \"click\"], [\"class\", \"row job-titles\", 4, \"ngFor\", \"ngForOf\"], [1, \"content-container\"], [1, \"text-content\", 3, \"change\"], [1, \"row\", \"job-titles\"], [1, \"col-6\", 3, \"change\"], [3, \"selected\", \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn-remove\", \"col-6\", 3, \"click\"], [3, \"selected\", \"value\"]],\n    template: function EmployeeAdminComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_button_click_1_listener() {\n          return ctx.toCollective();\n        });\n        i0.ɵɵtext(2, \" \\u0414\\u043E \\u0443\\u0441\\u0456\\u0445 \\u043F\\u0440\\u0430\\u0446\\u0456\\u0432\\u043D\\u0438\\u043A\\u0456\\u0432 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"hr\");\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, EmployeeAdminComponent_div_6_Template, 5, 1, \"div\", 4);\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_button_click_7_listener() {\n          return ctx.addContent();\n        });\n        i0.ɵɵtext(8, \"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0441\\u0442\\u0440\\u043E\\u043A\\u0443\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 3);\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelementStart(11, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_button_click_11_listener() {\n          return ctx.add();\n        });\n        i0.ɵɵtext(12, \" \\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0441\\u043F\\u0456\\u0432\\u0440\\u043E\\u0431\\u0456\\u0442\\u043D\\u0438\\u043A\\u0430 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_button_click_13_listener() {\n          return ctx.remove();\n        });\n        i0.ɵɵtext(14, \"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"hr\");\n        i0.ɵɵelementStart(16, \"div\");\n        i0.ɵɵelementStart(17, \"label\", 8);\n        i0.ɵɵtext(18, \"\\u0412\\u0435\\u043B\\u0438\\u043A\\u0435 \\u0444\\u043E\\u0442\\u043E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"img\", 9);\n        i0.ɵɵelementStart(20, \"textarea\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function EmployeeAdminComponent_Template_textarea_ngModelChange_20_listener($event) {\n          return ctx.employee.fullProfileUrl = $event;\n        })(\"change\", function EmployeeAdminComponent_Template_textarea_change_20_listener() {\n          return ctx.onChangeEvent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\");\n        i0.ɵɵelementStart(22, \"label\", 8);\n        i0.ɵɵtext(23, \"\\u041C\\u0430\\u043B\\u0435\\u043D\\u044C\\u043A\\u0435 \\u0444\\u043E\\u0442\\u043E\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"img\", 9);\n        i0.ɵɵelementStart(25, \"textarea\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function EmployeeAdminComponent_Template_textarea_ngModelChange_25_listener($event) {\n          return ctx.employee.smallProfileUrl = $event;\n        })(\"change\", function EmployeeAdminComponent_Template_textarea_change_25_listener() {\n          return ctx.onChangeEvent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\");\n        i0.ɵɵelementStart(27, \"div\", 2);\n        i0.ɵɵelementStart(28, \"label\", 8);\n        i0.ɵɵtext(29, \"\\u041F\\u0440\\u0456\\u0437\\u0432\\u0438\\u0449\\u0435\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function EmployeeAdminComponent_Template_input_ngModelChange_30_listener($event) {\n          return ctx.employee.lastName = $event;\n        })(\"change\", function EmployeeAdminComponent_Template_input_change_30_listener() {\n          return ctx.onChangeEvent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 2);\n        i0.ɵɵelementStart(32, \"label\", 8);\n        i0.ɵɵtext(33, \"\\u0406\\u043C'\\u044F\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function EmployeeAdminComponent_Template_input_ngModelChange_34_listener($event) {\n          return ctx.employee.firstName = $event;\n        })(\"change\", function EmployeeAdminComponent_Template_input_change_34_listener() {\n          return ctx.onChangeEvent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 2);\n        i0.ɵɵelementStart(36, \"label\", 8);\n        i0.ɵɵtext(37, \"\\u041F\\u043E \\u0431\\u0430\\u0442\\u044C\\u043A\\u043E\\u0432\\u0456\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function EmployeeAdminComponent_Template_input_ngModelChange_38_listener($event) {\n          return ctx.employee.secondName = $event;\n        })(\"change\", function EmployeeAdminComponent_Template_input_change_38_listener() {\n          return ctx.onChangeEvent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(39, \"hr\");\n        i0.ɵɵelementStart(40, \"div\");\n        i0.ɵɵelementStart(41, \"label\", 12);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_label_click_41_listener() {\n          return ctx.goToJobTitles();\n        });\n        i0.ɵɵtext(42, \"\\u041F\\u043E\\u0441\\u0430\\u0434\\u0438\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(43, EmployeeAdminComponent_div_43_Template, 5, 1, \"div\", 13);\n        i0.ɵɵelementStart(44, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EmployeeAdminComponent_Template_button_click_44_listener() {\n          return ctx.addJobTitle();\n        });\n        i0.ɵɵtext(45, \" \\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043F\\u043E\\u0441\\u0430\\u0434\\u0443 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.contents);\n        i0.ɵɵadvance(13);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.employee.fullProfileUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.fullProfileUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.employee.smallProfileUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.smallProfileUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.lastName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.firstName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.secondName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.employeeToJobTitles);\n      }\n    },\n    directives: [i6.NgForOf, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i7.NgSelectOption, i7.ɵNgSelectMultipleOption],\n    styles: [\".content[_ngcontent-%COMP%]{margin:20px 0;font-family:Suplexmentary_Comic_NC;color:#6f029e}.content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:large;font-weight:700}.content[_ngcontent-%COMP%]   .btn-collective[_ngcontent-%COMP%]{color:#fff;background-color:#6f029e;border-color:#921cc5;border-radius:10px}.content[_ngcontent-%COMP%]   .btn-collective[_ngcontent-%COMP%]:hover{background-color:#921cc5}.content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-around}.content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{color:#fff;background-color:green;border-color:#4ccf4c;border-radius:10px}.content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#4ccf4c}.content[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{color:#fff;background-color:red;border-color:#cf3a3a;border-radius:10px}.content[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]:hover{background-color:#cf3a3a}.content[_ngcontent-%COMP%]   .img-card[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]   .text-content[_ngcontent-%COMP%]{width:100%;height:150px}.content[_ngcontent-%COMP%]   .job-titles[_ngcontent-%COMP%]{margin:10px 0}.content[_ngcontent-%COMP%]   .job-title-label[_ngcontent-%COMP%]{color:#6f029e}.content[_ngcontent-%COMP%]   .job-title-label[_ngcontent-%COMP%]:hover{color:#d1a8e2}\"]\n  });\n  return EmployeeAdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}